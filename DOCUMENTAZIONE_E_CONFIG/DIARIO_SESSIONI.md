# DIARIO SESSIONI - Nuoto Libero Le Naiadi

Aggiorna una riga a fine di ogni sessione prima del push.

| Data (YYYY-MM-DD HH:MM) | Obiettivo sessione | File toccati | Test eseguiti | Esito |
|---|---|---|---|---|
| 2026-02-18 00:00 | Creato prompt operativo di avvio sessione con workflow pull/push e regole anti-duplicati | DOCUMENTAZIONE_E_CONFIG/PROMPT_AVVIO_SESSIONE.md; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | N/A (documentazione) | completato |
| 2026-02-18 13:09 | Creato AGENTS.md in root con regole automatiche di avvio sessione, anti-duplicati e chiusura con commit/push | AGENTS.md; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | N/A (documentazione) | completato |
| 2026-02-18 15:25 | Fix QR: fallback camera bagnino su foto in HTTP, download PDF QR autenticato utente, arricchimento dati essenziali nel PDF, aggiunta libreria locale html5-qrcode | piscina-php/dashboard-bagnino.html; piscina-php/dashboard-utente.html; api/qr.php; DOCUMENTAZIONE_E_CONFIG/GUIDA_TEST_TELEFONO_E_QR.md; assets/vendor/html5-qrcode/html5-qrcode.min.js; assets/vendor/html5-qrcode/LICENSE | `C:\xampp\php\php.exe -l api/qr.php` | completato |
| 2026-02-18 18:00 | Area utente: modifica profilo, gestione documenti mancanti/caricati, PDF documenti precompilati e mappa sezioni dati per Excel | api/auth.php; api/documenti.php; api/documenti-prefill.php; piscina-php/dashboard-utente.html; DOCUMENTAZIONE_E_CONFIG/MAPPA_SEZIONI_DATI_SITO.csv; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | `C:\xampp\php\php.exe -l api/auth.php`; `C:\xampp\php\php.exe -l api/documenti.php`; `C:\xampp\php\php.exe -l api/documenti-prefill.php` | completato |
| 2026-02-18 18:27 | Rimozione completa pagina galleria dal sito pubblico e dal CMS contenuti | index.html; chi-siamo.html; orari-tariffe.html; moduli.html; pacchetti.html; contatti.html; cookie.html; privacy.html; termini.html; galleria.html (eliminata); config/cms_map.php; DOCUMENTAZIONE_E_CONFIG/MAPPA_SEZIONI_DATI_SITO.csv; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | `C:\xampp\php\php.exe -l config/cms_map.php` | completato |
| 2026-02-18 19:06 | Correzione completa caratteri accentati corrotti (mojibake) sulle pagine pubbliche prima della pubblicazione | index.html; chi-siamo.html; orari-tariffe.html; moduli.html; pacchetti.html; contatti.html; cookie.html; privacy.html; termini.html; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | ricerca `rg -n \"Ãƒ|Ã‚|Ã¢â‚¬â„¢|Ã¢â‚¬|ï¿½\" -g \"*.html\" -- .` (nessun risultato) | completato |
| 2026-02-18 19:42 | Pre go-live: SEO tematico nuoto libero, rimozione avviso test login, refactor legale pacchetti/iscrizioni, preparazione CMS Builder-ready, generazione PDF pro-forma moduli interni | index.html; chi-siamo.html; orari-tariffe.html; moduli.html; pacchetti.html; contatti.html; privacy.html; cookie.html; termini.html; login.html; js/payment.js; piscina-php/dashboard-utente.html; piscina-php/dashboard-admin.html; piscina-php/dashboard-ufficio.html; js/dashboard-staff.js; api/pacchetti.php; api/order-confirmation.php; api/bonifico-notify.php; api/cms.php; api/cms/CmsValidation.php; api/cms/CmsStorage.php; api/cms/CmsRepository.php; api/cms/CmsService.php; api/cms/BuilderAdapter.php; db/MIGRATION_2026_02_18_CMS_BUILDER_READY.sql; piscina-php/dashboard-cms-builder.html; DOCUMENTAZIONE_E_CONFIG/BUILDER_IO_PREPARAZIONE.md; DOCUMENTAZIONE_E_CONFIG/CMS_BUILDER_READY_TEST_CHECKLIST.md; DOCUMENTAZIONE_E_CONFIG/ARCHIVIO_INTERNO_MODULI_PDF/*; scripts/genera_moduli_proforma.php; robots.txt; sitemap.xml; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | C:\xampp\php\php.exe -l api/pacchetti.php; C:\xampp\php\php.exe -l api/order-confirmation.php; C:\xampp\php\php.exe -l api/bonifico-notify.php; C:\xampp\php\php.exe -l api/cms.php; C:\xampp\php\php.exe -l api/cms/CmsValidation.php; C:\xampp\php\php.exe -l api/cms/CmsStorage.php; C:\xampp\php\php.exe -l api/cms/CmsRepository.php; C:\xampp\php\php.exe -l api/cms/CmsService.php; C:\xampp\php\php.exe scripts/genera_moduli_proforma.php | completato |
| 2026-02-18 21:20 | Refactor funzionale utenti/pacchetti/iscrizioni: nuovo flusso iscrizioni pending/approved/rejected con approvazione automatica account+QR+email con PDF istruzioni, CSV utenti avanzato, orari check-in aggiornati, pacchetti dinamici + pacchetto unico 10 ingressi, dashboard admin/ufficio estese | api/iscrizioni.php; api/config.php; api/checkin.php; api/pacchetti.php; api/stats.php; api/auth.php; api/admin.php; js/payment.js; js/dashboard-staff.js; pacchetti.html; piscina-php/dashboard-admin.html; piscina-php/dashboard-ufficio.html; piscina-php/dashboard-utente.html; orari-tariffe.html; ringraziamento.html; assets/regolamento-piscina.html; login.html; db/MIGRATION_2026_02_18_USER_PACKAGES_ENROLLMENTS.sql; db/SQL_RAW_PACKAGES_TABLE.sql; db/README_DB.md; admin/.htaccess; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md; DOCUMENTAZIONE_E_CONFIG/ARCHIVIO_INTERNO_MODULI_PDF/certificato-medico-indicazioni-pro-forma.pdf (rimosso) | C:\xampp\php\php.exe -l api/config.php; C:\xampp\php\php.exe -l api/checkin.php; C:\xampp\php\php.exe -l api/pacchetti.php; C:\xampp\php\php.exe -l api/stats.php; C:\xampp\php\php.exe -l api/auth.php; C:\xampp\php\php.exe -l api/admin.php; C:\xampp\php\php.exe -l api/iscrizioni.php | completato |
| 2026-02-18 21:40 | Rifinitura commerciale pagine orari/pacchetti: rimossa sezione tariffe, nuova offerta in 2 colonne (20 EUR obbligatori + 90 EUR pacchetto 10 ingressi), riepilogo checkout aggiornato senza termine "contributo" | orari-tariffe.html; pacchetti.html; js/payment.js; css/style.css; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | ricerca testo `rg -n \"contributo|Tariffe Section\"`; controllo riferimenti classi/id `rg -n \"summaryMandatoryFee|summaryPackageFee|package-offers-grid\"`; verifica sintassi JS non eseguita (node non presente) | completato |
| 2026-02-18 21:54 | Pacchetti: rimosse voci armadietto/docce/totale complessivo e nota iniziale, badge STEP 1/2 resi piÃ¹ visibili sopra card; fix login (colonna force_password_change mancante) e resilienza invio mail con fallback in coda locale | pacchetti.html; css/style.css; api/auth.php; api/config.php; config/mail.php; db/CREATE_DATABASE_FROM_ZERO.sql; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | C:\xampp\php\php.exe -l api/auth.php; C:\xampp\php\php.exe -l api/config.php; C:\xampp\php\php.exe -l config/mail.php; test POST contatti su `api/contact.php` con risposta 200; verifica DB `SHOW COLUMNS FROM profili LIKE 'force_password_change'` | completato |
| 2026-02-18 22:14 | Dashboard admin/ufficio: export guidato con anteprima griglia, selezione colonne e export personalizzato CSV/PDF dopo caricamento dati | piscina-php/dashboard-admin.html; piscina-php/dashboard-ufficio.html; js/dashboard-staff.js; api/stats.php; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | C:\xampp\php\php.exe -l api/stats.php; test API login admin + `stats.php?action=export-preview`; test `stats.php?action=export-custom` CSV/PDF con header download | completato |
| 2026-02-18 22:21 | Creato file export chat/handoff con stato lavori e prompt di ripresa per continuare da casa | DOCUMENTAZIONE_E_CONFIG/EXPORT_CHAT_E_RIPRESA_2026-02-18.md; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | Verifica presenza file e contenuto handoff | completato |
| 2026-02-19 10:13 | Setup repository su cartella corretta, backup completo, pulizia runtime/log, conversione totale pagine e dashboard da HTML a PHP con aggiornamento link/canonical/API/docs e redirect legacy .html->.php | .gitignore; .htaccess; index.php; chi-siamo.php; orari-tariffe.php; moduli.php; pacchetti.php; contatti.php; privacy.php; cookie.php; termini.php; login.php; reset-password.php; qr-view.php; ringraziamento.php; piscina-php/dashboard-admin.php; piscina-php/dashboard-ufficio.php; piscina-php/dashboard-bagnino.php; piscina-php/dashboard-utente.php; piscina-php/dashboard-contenuti.php; piscina-php/dashboard-cms-builder.php; piscina-php/login.php; js/cms-loader.js; js/dashboard-staff.js; js/payment.js; api/auth.php; api/admin.php; api/iscrizioni.php; db/CREATE_DATABASE_FROM_ZERO.sql; sitemap.xml; README.md; assets/README_ASSETS.txt; DOCUMENTAZIONE_E_CONFIG/ISTRUZIONI_SETUP_E_TEST.md; DOCUMENTAZIONE_E_CONFIG/DB_SETUP.md; DOCUMENTAZIONE_E_CONFIG/TEST_CREDENTIALS_LOCAL.txt (ignorato); DOCUMENTAZIONE_E_CONFIG/GUIDA_TEST_TELEFONO_E_QR.md; DOCUMENTAZIONE_E_CONFIG/CONFIG_EMAIL.md; DOCUMENTAZIONE_E_CONFIG/MAPPA_SEZIONI_DATI_SITO.csv; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md; logs/.gitkeep; logs/mail_queue/.gitkeep; logs/ratelimit/.gitkeep | backup zip: C:\xampp\htdocs\_backups\Nuoto-Libero-Le-Naiadi_backup_20260219_100715.zip; `php -l` su file PHP toccati (OK); `node --check` su js/cms-loader.js, js/dashboard-staff.js, js/payment.js (OK); verifica residui riferimenti `.html` in codice con `rg` (solo asset HTML voluti) | completato |
| 2026-02-19 11:10 | Go-live hardening: cleanup progetto, script operativi, landing emergenza, thank-you pages, modali custom, sicurezza/env, fix mojibake, backup completo | .gitignore; README.md; .env.example; bootstrap.php; config/env.php; landing.php; index.php; .htaccess; grazie-iscrizione.php; grazie-contatto.php; js/ui-modal.js; js/main.js; js/payment.js; login.php; piscina-php/dashboard-admin.php; piscina-php/dashboard-ufficio.php; piscina-php/dashboard-cms-builder.php; piscina-php/dashboard-contenuti.php; js/dashboard-staff.js; api/config.php; config/mail.php; config/payments.php; contatti.php; chi-siamo.php; orari-tariffe.php; moduli.php; pacchetti.php; cookie.php; privacy.php; termini.php; ringraziamento.php; robots.txt; scripts/install.php; scripts/setup-env.php; scripts/init-db.php; scripts/dev.php; scripts/build-prod.php; scripts/helpers.php; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | php -l su file PHP toccati (OK); node --check js/main.js/js/payment.js/js/ui-modal.js (OK); php scripts/build-prod.php (OK); smoke HTTP 200 su /, /login.php, /contatti.php, /grazie-iscrizione.php, /grazie-contatto.php, /landing.php; backup: c:\xampp\htdocs\_backups\Nuoto-Libero-Le-Naiadi_backup_20260219_111022.zip | completato |
| 2026-02-19 11:38 | Rimozione completa flussi pagamento online, cleanup file legacy pagamenti, adeguamento UI staff/utente a pratiche in struttura, fix CSP Firefox su immagini gensparkspace e riallineamento docs/setup | .env.example; .htaccess; README.md; DOCUMENTAZIONE_E_CONFIG/CONFIG_EMAIL.md; DOCUMENTAZIONE_E_CONFIG/ISTRUZIONI_SETUP_E_TEST.md; api/pacchetti.php; api/config.php; js/dashboard-staff.js; pacchetti.php; index.php; piscina-php/dashboard-admin.php; piscina-php/dashboard-ufficio.php; piscina-php/dashboard-utente.php; pagine pubbliche *.php (aggiornamento URL immagini); rimozioni: config/payments.php, api/bonifico-notify.php, api/order-confirmation.php, DOCUMENTAZIONE_E_CONFIG/CONFIG_PAGAMENTI_STRIPE_PAYPAL.md; logs/error.log e logs/mail.log rimossi dal tracking | php -l su PHP modificati (OK); node --check js/dashboard-staff.js/js/payment.js/js/main.js (OK); php scripts/build-prod.php (OK); curl header Apache con CSP aggiornata (include public.gensparkspace.com); verifica pacchetti senza testo pagamento online legacy (OK) | completato |
| 2026-02-19 12:15 | Raccolta dettagliata input richiesti da utente e generazione checklist spuntabile in PDF per go-live (senza pagamenti online) | DOCUMENTAZIONE_E_CONFIG/CHECKLIST_INPUT_UTENTE_GO_LIVE.md; DOCUMENTAZIONE_E_CONFIG/CHECKLIST_INPUT_UTENTE_GO_LIVE.pdf; scripts/genera_checklist_input_utente_pdf.php; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | php -l scripts/genera_checklist_input_utente_pdf.php (OK); php scripts/genera_checklist_input_utente_pdf.php (PDF generato) | completato |
| 2026-02-19 12:24 | Landing: aggiunto form contatto rapido essenziale (no menu) con invio a api/contact.php e redirect su grazie-contatto.php | landing.php; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | php -l landing.php (OK); verifica route /landing HTTP 200 (OK); verifica presenza hook form/redirect con rg (OK) | completato |
| 2026-02-19 12:36 | Modalita vetrina: area riservata clone, link landing confinati e blocco area reale in SITE_MODE=landing | .htaccess; landing.php; area-riservata.php; landing-privacy.php; login.php; grazie-contatto.php; piscina-php/dashboard-admin.php; piscina-php/dashboard-ufficio.php; piscina-php/dashboard-bagnino.php; piscina-php/dashboard-utente.php; piscina-php/dashboard-contenuti.php; piscina-php/dashboard-cms-builder.php; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | C:\\xampp\\php\\php.exe -l su PHP toccati (OK); curl smoke in SITE_MODE=landing: /landing 200, /area-riservata 200, /login.php 302->area-riservata.php, /piscina-php/dashboard-admin.php 302->../area-riservata.php | completato |
| 2026-02-19 13:20 | Stabilizzazione pre-pubblicazione: dashboard utente semplificata (stato+QR+profilo con richiesta modifica), workflow approvazione staff con audit log, fix \"Vedi utente\", landing obbligatoria con oggetto condizionale + thank-you conforme, rimozione CMS interno legacy e base Builder.io, hardening/rate limit e cleanup debug | .env.example; api/auth.php; api/admin.php; api/contact.php; api/documenti.php; api/cms.php; api/cms/BuilderAdapter.php; api/cms/CmsRepository.php; db/CREATE_DATABASE_FROM_ZERO.sql; db/MIGRATION_2026_02_19_PROFILE_UPDATE_REQUESTS.sql; landing.php; grazie-contatto.php; js/main.js; js/dashboard-staff.js; piscina-php/dashboard-utente.php; piscina-php/dashboard-admin.php; piscina-php/dashboard-ufficio.php; piscina-php/dashboard-contenuti.php; piscina-php/dashboard-cms-builder.php; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | php -l: api/auth.php, api/admin.php, api/contact.php, api/documenti.php, api/cms.php, api/cms/BuilderAdapter.php, api/cms/CmsRepository.php, landing.php, grazie-contatto.php, dashboard-*.php (tutti OK); node --check js/main.js/js/dashboard-staff.js (OK); smoke API: login utente/admin (OK), richiesta modifica dati + approvazione admin + update DB (OK), admin user-detail (OK), contact subject=altro senza dettaglio 400 / con dettaglio 200 (OK), builder-stub 200 con messaggio API key mancante (OK); smoke HTTP: /landing.php 200, /grazie-contatto.php?from=landing 200, /piscina-php/dashboard-contenuti.php 302->dashboard-cms-builder.php | completato |
| 2026-02-19 13:45 | Backup iniziale+finale, manuale A4 Aruba, landing WhatsApp/orari/email, gestione orari scanner/site mode da admin+ufficio con doppia conferma, reset password cliente da staff, invito password su nuovo utente, UX scanner bagnino e alert fissi, bottoni home area riservata | .env.example; api/admin.php; api/config.php; area-riservata.php; db/CREATE_DATABASE_FROM_ZERO.sql; db/README_DB.md; db/MIGRATION_2026_02_19_OPERATIONAL_SETTINGS.sql; js/dashboard-staff.js; landing.php; login.php; piscina-php/dashboard-admin.php; piscina-php/dashboard-bagnino.php; piscina-php/dashboard-ufficio.php; DOCUMENTAZIONE_E_CONFIG/MANUALE_OPUSCOLO_GO_LIVE_ARUBA_WEBHOSTING_EASY_A4.html; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | backup iniziale zip; C:\xampp\php\php.exe -l su file PHP toccati (OK); node --check js/dashboard-staff.js (OK); php scripts/build-prod.php (OK); smoke HTTP 200 su index/landing/login/grazie/dashboard; test API login admin/ufficio/bagnino/utente (OK); test admin operational-settings GET/PATCH + set-site-mode PATCH (OK); test user-detail (OK); test send-password-reset (OK); test create-user senza password + delete-user (OK); test contact form landing 200 (OK) | completato |
| 2026-02-19 13:58 | Cleanup finale console debug JS per ridurre rumore in console lato utente e staff | js/main.js; js/payment.js; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | node --check js/main.js (OK); node --check js/payment.js (OK); node --check js/dashboard-staff.js (OK) | completato |
| 2026-02-19 14:22 | Creato dossier PDF unico con test completi, credenziali locali, link operativi e checklist mancanze | DOCUMENTAZIONE_E_CONFIG/DOSSIER_COMPLETO_TEST_LINK_PASSWORD_CHECKLIST_MANCANZE.md; DOCUMENTAZIONE_E_CONFIG/DOSSIER_COMPLETO_TEST_LINK_PASSWORD_CHECKLIST_MANCANZE.pdf; scripts/genera_dossier_completo_pdf.php; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | C:\xampp\php\php.exe -l scripts/genera_dossier_completo_pdf.php (OK); C:\xampp\php\php.exe scripts/genera_dossier_completo_pdf.php (PDF generato) | completato |
| 2026-02-19 19:32 | Guida operativa dettagliata Builder free + Aruba (integrazione admin/ufficio), generazione PDF dedicato e nota operativa su assenza `.git` per push | DOCUMENTAZIONE_E_CONFIG/GUIDA_INTEGRAZIONE_BUILDER_FREE_ARUBA_ADMIN_UFFICIO.md; DOCUMENTAZIONE_E_CONFIG/GUIDA_INTEGRAZIONE_BUILDER_FREE_ARUBA_ADMIN_UFFICIO.pdf; scripts/genera_guida_builder_free_aruba_pdf.php; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | C:\xampp\php\php.exe -l scripts/genera_guida_builder_free_aruba_pdf.php (OK); C:\xampp\php\php.exe scripts/genera_guida_builder_free_aruba_pdf.php (PDF generato) | completato |
| 2026-02-19 21:05 | Refactor QR statico utente: token fisso per profilo, check-in token-based con scalata atomica, route `/q/<token>`, allineamento dashboard/email/QR PDF e migrazione DB per utenti esistenti | api/config.php; api/auth.php; api/admin.php; api/pacchetti.php; api/iscrizioni.php; api/qr.php; api/checkin.php; piscina-php/dashboard-bagnino.php; piscina-php/dashboard-utente.php; qr-view.php; .htaccess; db/CREATE_DATABASE_FROM_ZERO.sql; db/MIGRATION_2026_02_19_STATIC_USER_QR_TOKEN.sql; db/README_DB.md; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | C:\xampp\php\php.exe -l api/config.php api/auth.php api/admin.php api/checkin.php api/iscrizioni.php api/pacchetti.php api/qr.php piscina-php/dashboard-bagnino.php piscina-php/dashboard-utente.php qr-view.php (tutti OK); esecuzione migrazione SQL `db/MIGRATION_2026_02_19_STATIC_USER_QR_TOKEN.sql` (OK); test integrati API+DB: 1) 5->2 scan->3 con QR invariato, 2) acquisto +10 + conferma con QR invariato, 3) backfill utenti esistenti con `missing_qr_tokens=0` (OK) | completato |
| 2026-02-19 21:21 | Fix reversibilita landing mode: bypass staff temporaneo per accesso admin/ufficio anche in SITE_MODE=landing, link di emergenza in area riservata demo e revoca bypass al logout | bootstrap.php; login.php; area-riservata.php; piscina-php/dashboard-admin.php; piscina-php/dashboard-ufficio.php; piscina-php/dashboard-bagnino.php; piscina-php/dashboard-utente.php; piscina-php/dashboard-contenuti.php; piscina-php/dashboard-cms-builder.php; js/dashboard-staff.js; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | C:\xampp\php\php.exe -l bootstrap.php login.php area-riservata.php piscina-php/dashboard-admin.php piscina-php/dashboard-ufficio.php piscina-php/dashboard-bagnino.php piscina-php/dashboard-utente.php piscina-php/dashboard-contenuti.php piscina-php/dashboard-cms-builder.php (tutti OK); node --check non disponibile; smoke con curl: SITE_MODE=landing -> /login.php 302 area-riservata, /login.php?staff_access=1 200 + cookie `nl_staff_access`, dashboard-admin 200 con cookie e 302 senza cookie, /login.php?clear_staff_access=1 revoca cookie (OK); ripristino finale SITE_MODE=full | completato |
| 2026-02-19 22:09 | Rebranding completo: rimozione brand Squaletti/Squalotte da sito e template email, footer mail uniformato a "Messaggio automatico - Nuoto libero Le Naiadi", invio test email reale | api/config.php; config/mail.php; api/*.php (subject/mail text); pagine pubbliche *.php; dashboard *.php; assets/*.html; js/main.js; js/payment.js; js/dashboard-staff.js; js/ui-modal.js; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | `C:\xampp\php\php.exe -l` su tutti i file PHP modificati (OK); `node --check` non disponibile; `rg` brand legacy (nessuna occorrenza); test POST `api/contact.php` con risposta success e log `Email sent` verso `info@nuotoliberolenaiadi.it` | completato |
| 2026-02-19 22:29 | Landing: separazione campi nome/cognome + copyright CLADAM, hardening sicurezza auth (policy password forte, hashing Argon2id/Bcrypt helper, rehash automatico, revoca JWT su logout), controllo integrita DB e smoke test completi | landing.php; api/contact.php; api/config.php; api/auth.php; api/admin.php; api/iscrizioni.php; reset-password.php; login.php; .env; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | `php -l` su tutti i PHP modificati (OK); `php scripts/build-prod.php` (OK, Node assente); test login->me->logout->me con token revocato (bloccato dopo logout); test `api/contact.php` con `first_name/last_name` e con `name` legacy (OK); check DB: `missing_qr_token=0`, `duplicate_qr_token=0`, `orphan_* = 0`; ricerca brand residuo in codice `rg -i squal` (nessuna occorrenza) | completato |
| 2026-02-20 11:50 | Home area riservata dinamica per mode, logout admin->landing in SITE_MODE=landing, gating pagine normali in landing solo admin/ufficio con cookie ruolo staff | bootstrap.php; api/config.php; api/auth.php; api/admin.php; index.php; chi-siamo.php; orari-tariffe.php; moduli.php; pacchetti.php; contatti.php; privacy.php; cookie.php; termini.php; login.php; js/dashboard-staff.js; piscina-php/dashboard-admin.php; piscina-php/dashboard-ufficio.php; piscina-php/dashboard-utente.php; piscina-php/dashboard-bagnino.php; piscina-php/dashboard-cms-builder.php; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | C:\xampp\php\php.exe -l su tutti i PHP toccati (OK); node --check js/dashboard-staff.js (OK); smoke runtime: anon index in landing -> landing, admin login in landing -> index access consentito, bagnino login in landing -> index bloccato su landing, set-site-mode full->landing rilascia cookie full access a sessione admin (OK) | completato |
| 2026-02-20 11:37 | Fix globale sessione/token: eliminati falsi "Non autenticato" con fallback header Authorization backend e relogin automatico frontend su 401 | api/config.php; login.php; piscina-php/dashboard-utente.php; piscina-php/dashboard-bagnino.php; piscina-php/dashboard-cms-builder.php; js/dashboard-staff.js; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | C:\xampp\php\php.exe -l api/config.php login.php piscina-php/dashboard-utente.php piscina-php/dashboard-bagnino.php piscina-php/dashboard-cms-builder.php (OK); node --check js/dashboard-staff.js (OK); smoke API login+me+profile-update-requests+my-purchases su utente test (OK) | completato |
| 2026-02-20 12:34 | Implementata policy centralizzata Landing-only con enforcement ruoli via sessione: pubblico confinato su landing/login/reset/form, utente sempre confinato su dashboard, bagnino abilitato al sito completo anche in landing, rimosso redirect forzato login->demo, hardening redirect/error handling dashboard | bootstrap.php; api/auth.php; api/admin.php; login.php; landing.php; index.php; chi-siamo.php; orari-tariffe.php; moduli.php; pacchetti.php; contatti.php; privacy.php; cookie.php; termini.php; grazie-iscrizione.php; ringraziamento.php; qr-view.php; js/dashboard-staff.js; piscina-php/dashboard-admin.php; piscina-php/dashboard-ufficio.php; piscina-php/dashboard-bagnino.php; piscina-php/dashboard-utente.php; piscina-php/dashboard-cms-builder.php; piscina-php/dashboard-contenuti.php; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | C:\xampp\php\php.exe -l su tutti i PHP toccati (OK); node --check js/dashboard-staff.js (OK); smoke runtime con sessioni reali: landing mode anon -> landing su / e pagine complete, login/reset accessibili, qr-view bloccato; utente login in landing -> redirect dashboard utente su /index; bagnino login in landing -> accesso /index consentito; full mode anon -> chi-siamo accessibile; full mode utente -> redirect dashboard utente; ripristino finale SITE_MODE=landing (OK) | completato |
| 2026-02-20 13:44 | Stabilizzazione go-live: fix login admin/ufficio, ripristino SITE_MODE landing, SMTP Aruba contatti e SQL unico deploy Aruba Sql1919629_1 | bootstrap.php; api/config.php; api/admin.php; api/auth.php; login.php; js/dashboard-staff.js; landing.php; db/CREATE_DATABASE_FROM_ZERO.sql; db/ARUBA_SQL1919629_1_FULL_DEPLOY.sql; DOCUMENTAZIONE_E_CONFIG/DIARIO_SESSIONI.md | php -l bootstrap.php/api/config.php/api/admin.php/api/auth.php/login.php (OK); node --check js/dashboard-staff.js (OK); smoke landing redirect con SITE_MODE=landing (302 su landing); test api/contact.php con SMTP Aruba e log Email sent; validazione SQL unico (compatibilita MySQL Aruba) | completato |
